define(["jquery","jqueryui","core/log","filter_poodll/utils_amd"],function(a,b,c,d){"use strict";return c.debug("Post Record Review Widget: initialising"),{itemid:null,currentitem:null,itemcount:null,cmid:null,instanceprops:null,clone:function(){return a.extend(!0,{},this)},init:function(a){var b=this.clone();b.itemid=a.itemid,b.cmid=a.cmid,b.currentitem=a.currentitem,b.itemcount=a.itemcount,b.instanceprops=a,b.instanceprops.itemholderid="mod_fluencybuilder_dplaceholder_"+a.currentitem,b.instanceprops.holderid="mod_fluencybuilder_rwplaceholder_"+a.currentitem,b.instanceprops.recorderid="mod_fluencybuilder_rwplaceholder_"+a.currentitem,b.insert_html(),b.register_events()},insert_html:function(){var b=this.instanceprops,c=a("#"+b.holderid);if(0!=c.length){var d=M.util.get_string("recui_howwasit","mod_fluencybuilder"),e='<div class="mod_fluencybuilder_reviewwidgetbox" title="'+d+'">';e+='<button type="button" class="mod_fluencybuilder_rwbutton mod_fluencybuilder_question_play"><i class="fa fa-play" aria-hidden="true"></i></button>',e+='<button type="button" class="mod_fluencybuilder_rwbutton mod_fluencybuilder_model_play"><i class="fa fa-play" aria-hidden="true"></i></button>',e+='<button type="button" class="mod_fluencybuilder_rwbutton mod_fluencybuilder_me_play"><i class="fa fa-play" aria-hidden="true"></i></button>',e+='<button type="button" class="mod_fluencybuilder_rwbutton mod_fluencybuilder_me_ok"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i></button>',e+=' <button type="button" class="mod_fluencybuilder_rwbutton mod_fluencybuilder_me_ng"><i class="fa fa-thumbs-o-down" aria-hidden="true"></i></button>',e+=' <span class="mod_fluencybuilder_rw_comment">blablah</span>',e+="</div>",a(c).prepend(e);var f={the_box:a("#"+b.holderid+"  .mod_fluencybuilder_reviewwidgetbox"),question_play:a("#"+b.holderid+"  .mod_fluencybuilder_question_play"),model_play:a("#"+b.holderid+"  .mod_fluencybuilder_model_play"),me_play:a("#"+b.holderid+"  .mod_fluencybuilder_me_play"),me_ok:a("#"+b.holderid+"  .mod_fluencybuilder_me_ok"),me_ng:a("#"+b.holderid+"  .mod_fluencybuilder_me_ng")};b.controls=f}},register_events:function(){var b=this.instanceprops;b.controls.me_play.click(function(){var c=a("#"+b.itemholderid+"  .poodll_play-recording_fluencybuilder");c.click()});var c=a("#"+b.holderid+"  .poodll_modelplayer_fluencybuilder"),d=a("#"+b.itemholderid+"  .poodll_itemplayer_fluencybuilder");if(c.length<1)var e=setInterval(function(){c=a("#"+b.itemholderid+"  .poodll_modelplayer_fluencybuilder"),d=a("#"+b.itemholderid+"  .poodll_itemplayer_fluencybuilder"),c.length>0&&(clearInterval(e),b.controls.model_play.click(function(){c.click()}),b.controls.question_play.click(function(){d.click()}))},500);else b.controls.model_play.click(function(){c.click()}),b.controls.question_play.click(function(){d.click()})}}});